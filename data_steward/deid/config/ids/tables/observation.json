{
    "generalize":[
        {
            "rules":"@generalize.RACE",
             "fields":["value_source_concept_id", "value_as_concept_id"],
             "dataset":":idataset",
             "table":"observation",
             "alias":"my_table",
             "key_field":"my_table.person_id",
             "key_row":"my_table.value_source_concept_id",
             "value_field":"observation.person_id",
             "on": " exists (select * from `:idataset.observation` as record2 where :join_tablename.observation_id = record2.observation_id and observation_source_concept_id in (1586140)) "
        },
        {
            "rules":"@generalize.SEXUAL-ORIENTATION",
            "fields":["value_source_concept_id", "value_as_concept_id"],
            "on": " exists (select * from `:idataset.observation` as record2 where :join_tablename.observation_id = record2.observation_id and observation_source_concept_id in (1585899)) "
        },
        
         {
             "rules":"@generalize.SEX-AT-BIRTH",
             "fields":["value_source_concept_id", "value_as_concept_id"],
             "on": " exists (select * from `:idataset.observation` as record2 where :join_tablename.observation_id = record2.observation_id and observation_source_concept_id in (1585845)) "
         },
        {
            "rules":"@generalize.GENDER",
            "fields":["value_source_concept_id", "value_as_concept_id"],
            "dataset": ":idataset",
            "table": "observation",
            "alias": "find_gender",
            "key_field":"find_gender.person_id",
            "key_row": "find_gender.value_source_concept_id",
            "value_field":"observation.person_id",
            "on": " exists (select * from `:idataset.observation` as record2 where :join_tablename.observation_id = record2.observation_id and observation_source_concept_id in (1585838)) "
        },
        {
            "rules":"@generalize.EDUCATION",
            "fields":["value_source_concept_id", "value_as_concept_id"],
            "on": " exists (select * from `:idataset.observation` as record2 where :join_tablename.observation_id = record2.observation_id and observation_source_concept_id in (1585940)) "
        },
         {
            "rules":"@generalize.EMPLOYMENT",
            "fields":["value_source_concept_id", "value_as_concept_id"],
            "on": " exists (select * from `:idataset.observation` as record2 where :join_tablename.observation_id = record2.observation_id and observation_source_concept_id in (1585952)) "
         }
    ],
    "suppress":[
        {   "comment":"removing ethnic groups, alternative race and fields (data has redundancies)",
            "on":"observation_concept_id in (4013886, 4271761, 4135376)"},
        {
            "comment": "removing specific ICD9CM and ICD10CM codes based on the value_source_concept_id field",
            "on": " exists (select * from `:idataset.observation` as record2 where :join_tablename.observation_id = record2.observation_id and value_source_concept_id in (select concept_id from `:idataset.concept` where (vocabulary_id='ICD9CM' and (concept_code like 'E80%' OR concept_code like 'E81%' OR concept_code like 'E82%' OR concept_code like 'E83%' OR concept_code like 'E84%' OR concept_code like 'E913%' OR concept_code like 'E910%' OR concept_code like 'E928.0' OR concept_code like 'E95%' OR concept_code like 'E96%' OR concept_code like 'E97%' OR concept_code like 'E99%' OR concept_code = '799.9' OR concept_code = '799' OR concept_code = '798' OR concept_code like 'V3%' OR concept_code like '764%' OR concept_code like '765%' OR concept_code like '766%' OR concept_code like '767%' OR concept_code like '768%' OR concept_code like '769%' OR concept_code like '770%' OR concept_code like '771%' OR concept_code like '772%' OR concept_code like '773%' OR concept_code like '774%' OR concept_code like '775%' OR concept_code like '776%' OR concept_code like '777%' OR concept_code like '778%' OR concept_code like '779%')) OR (vocabulary_id='ICD10CM' and (concept_code like 'P%' OR concept_code like 'Z38%' OR concept_code = 'R99' OR concept_code like 'Y36%' OR concept_code like 'Y36%' OR concept_code like 'Y37%' OR concept_code like 'Y35%' OR concept_code like 'Y38%' OR concept_code like 'X52%' OR concept_code like 'V*' OR concept_code like 'W65%' OR concept_code like 'W66%' OR concept_code like 'W67%' OR concept_code like 'W68%' OR concept_code like 'W69%' OR concept_code like 'W70%' OR concept_code like 'W71%' OR concept_code like 'W72%' OR concept_code like 'W73%' OR concept_code like 'W74%' OR concept_code like 'X92%' OR concept_code like 'X93%' OR concept_code like 'X94%' OR concept_code like 'X95%' OR concept_code like 'X96%' OR concept_code like 'X97%' OR concept_code like 'X98%' OR concept_code like 'X99%' OR concept_code like 'Y00%' OR concept_code like 'Y01%' OR concept_code like 'Y02%' OR concept_code like 'Y03%' OR concept_code like 'Y04%' OR concept_code like 'Y05%' OR concept_code like 'Y06%' OR concept_code like 'Y07%' OR concept_code like 'Y08%' OR concept_code like 'Y09%'))))"
        },
        {
            "comment": "removing specific ICD9CM and ICD10CM codes based on the observation_source_concept_id field",
            "on": " exists (select * from `:idataset.observation` as record2 where :join_tablename.observation_id = record2.observation_id and observation_source_concept_id in (select concept_id from `:idataset.concept` where (vocabulary_id='ICD9CM' and (concept_code like 'E80%' OR concept_code like 'E81%' OR concept_code like 'E82%' OR concept_code like 'E83%' OR concept_code like 'E84%' OR concept_code like 'E913%' OR concept_code like 'E910%' OR concept_code like 'E928.0' OR concept_code like 'E95%' OR concept_code like 'E96%' OR concept_code like 'E97%' OR concept_code like 'E99%' OR concept_code = '799.9' OR concept_code = '799' OR concept_code = '798' OR concept_code like 'V3%' OR concept_code like '764%' OR concept_code like '765%' OR concept_code like '766%' OR concept_code like '767%' OR concept_code like '768%' OR concept_code like '769%' OR concept_code like '770%' OR concept_code like '771%' OR concept_code like '772%' OR concept_code like '773%' OR concept_code like '774%' OR concept_code like '775%' OR concept_code like '776%' OR concept_code like '777%' OR concept_code like '778%' OR concept_code like '779%')) OR (vocabulary_id='ICD10CM' and (concept_code like 'P%' OR concept_code like 'Z38%' OR concept_code = 'R99' OR concept_code like 'Y36%' OR concept_code like 'Y36%' OR concept_code like 'Y37%' OR concept_code like 'Y35%' OR concept_code like 'Y38%' OR concept_code like 'X52%' OR concept_code like 'V*' OR concept_code like 'W65%' OR concept_code like 'W66%' OR concept_code like 'W67%' OR concept_code like 'W68%' OR concept_code like 'W69%' OR concept_code like 'W70%' OR concept_code like 'W71%' OR concept_code like 'W72%' OR concept_code like 'W73%' OR concept_code like 'W74%' OR concept_code like 'X92%' OR concept_code like 'X93%' OR concept_code like 'X94%' OR concept_code like 'X95%' OR concept_code like 'X96%' OR concept_code like 'X97%' OR concept_code like 'X98%' OR concept_code like 'X99%' OR concept_code like 'Y00%' OR concept_code like 'Y01%' OR concept_code like 'Y02%' OR concept_code like 'Y03%' OR concept_code like 'Y04%' OR concept_code like 'Y05%' OR concept_code like 'Y06%' OR concept_code like 'Y07%' OR concept_code like 'Y08%' OR concept_code like 'Y09%'))))"
        },
        {
            "comment": "fix for the nullable based rule",
            "on": " exists (SELECT * from `:idataset.observation` as record2 where :join_tablename.observation_id = record2.observation_id and observation_source_value IN ('ExtraConsent_EverReceivedUPMCCare','ExtraConsent_ScheduledWithPACares','ArizonaSitePairing_AZSitepairingLocation','CaliforniaSitePairing_CaliforniaUniversityCare','SouthCarolinaSitePairing_EauClaire','SouthCarolinaSitePairing_EauClaireAppointment','ColumbiaSitePairing_ColumbiaCare','NewYorkSitePairing_HRHCare','CHCSitePairing_CHCCareatLocation','MichiganSitePairing_LiveInFollowingAreas','EastSoutheastMichigan_CareAtHenryFord','IllinoisSitePairing_IllinoisInstitution','TennesseeSitePairing_CherokeeHealthPatient','TexasSitePairing_BaylorScott','NewEnglandSitePairing_CareReceived','MississippiSitePairing_JacksonHinds','MississippiSitePairing_JacksonHindsAppointment','PIIName_First','PIIName_Middle','PIIName_Last','PIIAddress_StreetAddress','PIIAddress_StreetAddress2','StreetAddress_PIICity','StreetAddress_PIIZIP','PIIContactInformation_Phone','ConsentPII_EmailAddress','ExtraConsent_Signature','ExtraConsent_CABoRSignature','SanDiegoSitePairing_SanDiegoBloodBank','SitePairing_CurrentlyReside','ResideAZSArizona_AZSArizonaSpecific','ResideAZCArizona_AZCArizonaSpecific','EHRConsentPII_Signature','EHRConsentPII_ILHIPPAWitnessSignature','TheBasics_CountryBornTextBox','RaceEthnicityNoneOfThese_RaceEthnicityFreeTextBox','AIAN_AIANSpecific','Asian_AsianSpecific','Black_BlackSpecific','MENA_MENASpecific','NHPI_NHPISpecific','White_WhiteSpecific','Hispanic_HispanicSpecific','WhatTribeAffiliation_FreeText','AIANNoneOfTheseDescribeMe_AIANFreeText','NoneOfTheseDescribeMe_AsianFreeText','BlackNoneOfTheseDescribeMe_BlackFreeText','MENANoneOfTheseDescribeMe_MENAFreeText','NHPINoneOfTheseDescribeMe_NHPIFreeText','WhiteNoneOfTheseDescribeMe_WhiteFreeText','Gender_CloserGenderDescription','SpecifiedGender_SpecifiedGenderTextBox','GenderIdentity_SexualityCloserDescription','SomethingElse_SexualitySomethingElseTextBox','LivingSituation_CurrentLiving','LivingSituation_LivingSituationFreeText','SecondaryContactInfo_PersonOneFirstName','SecondaryContactInfo_PersonOneMiddleInitial','SecondaryContactInfo_PersonOneLastName','SecondaryContactInfo_PersonOneAddressOne','SecondaryContactInfo_PersonOneAddressTwo','PersonOneAddress_PersonOneAddressCity','PersonOneAddress_PersonOneAddressZipCode','SecondaryContactInfo_PersonOneEmail','SecondaryContactInfo_PersonOneTelephone','SecondaryContactInfo_SecondContactsFirstName','SecondaryContactInfo_SecondContactsMiddleInitial','SecondaryContactInfo_SecondContactsLastName','SecondaryContactInfo_SecondContactsAddressOne','SecondaryContactInfo_SecondContactsAddressTwo','SecondContactsAddress_SecondContactCity','SecondContactsAddress_SecondContactZipCode','SecondaryContactInfo_SecondContactsEmail','SecondaryContactInfo_SecondContactsNumber','SocialSecurity_SocialSecurityNumber','Employment_EmploymentWorkAddress','EmploymentWorkAddress_AddressLineOne','EmploymentWorkAddress_AddressLineTwo','EmploymentWorkAddress_City','EmploymentWorkAddress_ZipCode','EmploymentWorkAddress_Country','HispanicNoneOfTheseDescribeMe_HispanicFreeText','SexAtBirthNoneOfThese_SexAtBirthTextBox','ActiveDuty_AvtiveDutyServeStatus','OtherSpecify_OtherDrugsTextBox','OrganTransplantDescription_OtherOrgan','OrganTransplantDescription_OtherTissue','PersonalMedicalHistory_AdditionalDiagnosis','HowOldWereYouHypertension_FreeTextBox','HowOldWereYouHighCholesterol_FreeTextBox','HowOldWereYouHeartAttack_FreeTextBox','HowOldWereYouCoronaryArtery_FreeTextBox','HowOldWereYouCongestiveHeartFailure_FreeTextBox','HowOldWereYouAtrialFibrillation_FreeTextBox','HowOldWereYouHeartValveDisease_FreeTextBox','HowOldWereYouStroke_FreeTextBox','HowOldWereYouTransientIschemicAttack_FreeTextBox','HowOldWereYouPulmonaryEmbolism_FreeTextBox','HowOldPeripheralVascularDisease_FreeTextBox','HowOldWereYouAnemia_FreeTextBox','HowOldWereYouSickleCellDisease_FreeTextBox','HowOldWereYouBleedingDisorder_FreeTextBox','HowOldWereYouAsthma_FreeTextBox','HowOldWereYouChronicLung_FreeTextBox','HowOldWereYouSleepApnea_FreeTextBox','HowOldWereYouBladderCancer_FreeTextBox','HowOldWereYouBloodCancer_FreeTextBox','HowOldWereYouBoneCancer_FreeTextBox','HowOldWereYouBrainCancer_FreeTextBox','HowOldWereYouBreastCancer_FreeTextBox','HowOldWereYouCervicalCancer_FreeTextBox','HowOldWereYouColonRectalCancer_FreeTextBox','HowOldWereYouEndocrineCancer_FreeTextBox','HowOldWereYouEndometrialCancer_FreeTextBox','HowOldWereYouEsophagealCancer_FreeTextBox','HowOldWereYouEyeCancer_FreeTextBox','HowOldWereYouHeadNeckCancer_FreeTextBox','HowOldWereYouKidneyCancer_FreeTextBox','HowOldWereYouLungCancer_FreeTextBox','HowOldWereYouPancreaticCancer_FreeTextBox','HowOldWereYouProstateCancer_FreeTextBox','HowOldWereYouSkinCancer_FreeTextBox','HowOldWereYouStomachCancer_FreeTextBox','HowOldWereYouThyroidCancer_FreeTextBox','HowOldWereYouOtherCancer_FreeTextBox','HowOldWereYouAcidReflux_FreeTextBox','HowOldWereYouBowelObstruction_FreeTextBox','HowOldWereYouColonPolyps_FreeTextBox','HowOldWereYouCrohnsDisease_FreeTextBox','HowOldWereYouDiverticulosis_FreeTextBox','HowOldWereYouGallStones_FreeTextBox','HowOldWereYouHemorrhoids_FreeTextBox','HowOldWereYouHernia_FreeTextBox','HowOldWereYouIrritableBowel_FreeTextBox','HowOldWereYouLiverCondition_FreeTextBox','HowOldWereYouPancreatitis_FreeTextBox','HowOldWereYouPepticUlcers_FreeTextBox','HowOldWereYouUlcerativeColitis_FreeTextBox','HowOldWereYouHyperthyroidism_FreeTextBox','HowOldWereYouHypothyroidism_FreeTextBox','HowOldWereYouOtherThyroid_FreeTextBox','HowOldWereYouType1Diabetes_FreeTextBox','HowOldWereYouType2Diabetes_FreeTextBox','HowOldWereYouPreDiabetes_FreeTextBox','HowOldWereYouOtherDiabetes_FreeTextBox','HowOldWereYouAcuteKidneyNoDialysis_FreeTextBox','HowOldWereYouKidneyWithDialysis_FreeTextBox','HowOldWereYouKidneyWithoutDialysis_FreeTextBox','HowOldWereYouKidneyStones_FreeTextBox','HowOldWereYouArthritis_FreeTextBox','HowOldWereYouCarpalTunnel_FreeTextBox','HowOldWereYouFibromyalgia_FreeTextBox','HowOldWereYouFracturedBrokenBone_FreeTextBox','HowOldWereYouGout_FreeTextBox','HowOldWereYouLupus_FreeTextBox','HowOldWereYouOsteoporosis_FreeTextBox','HowOldWereYouSpineMuscleBone_FreeTextBox','HowOldWereYouBlindness_FreeTextBox','HowOldWereYouCataracts_FreeTextBox','HowOldWereYouDryEyes_FreeTextBox','HowOldWereYouFarSightedness_FreeTextBox','HowOldWereYouGlaucoma_FreeTextBox','HowOldWereYouMacularDegeneration_FreeTextBox','HowOldWereYouNearSightedness_FreeTextBox','HowOldWereYouTinnitus_FreeTextBox','HowOldWereYouHearingLoss_FreeTextBox','HowOldWereYouChronicSinus_FreeTextBox','HowOldWereYouHepatitisC_FreeTextBox','HowOldWereYouHIVAIDS_FreeTextBox','HowOldWereYouUrinaryTract_FreeTextBox','HowOldWereYouTuberculosis_FreeTextBox','HowOldWereYouAmytrophicLateral_FreeTextBox','HowOldWereYouChronicFatigue_FreeTextBox','HowOldWereYouConcussion_FreeTextBox','HowOldWereYouDementia_FreeTextBox','HowOldWereYouEpilepsy_FreeTextBox','HowOldWereYouInsomnia_FreeTextBox','HowOldWereYouMemoryLoss_FreeTextBox','HowOldWereYouMigraine_FreeTextBox','HowOldWereYouMultipleSclerosis_FreeTextBox','HowOldWereYouMuscularDystrophy_FreeTextBox','HowOldWereYouNarcolepsy_FreeTextBox','HowOldWereYouNeuropathy_FreeTextBox','HowOldWereYouOtherHeadaches_FreeTextBox','HowOldWereYouParkinsonsDisease_FreeTextBox','HowOldWereYouRestlessLeg_FreeTextBox','HowOldWereYouSpinalCordInjury_FreeTextBox','HowOldWereYouTraumaBrainInjury_FreeTextBox','HowOldWereYouAlcoholOrDrug_FreeTextBox','HowOldWereYouAnxiety_FreeTextBox','HowOldWereYouADHD_FreeTextBox','HowOldWereYouBipolar_FreeTextBox','HowOldWereYouDepression_FreeTextBox','HowOldWereYouEatingDisorder_FreeTextBox','HowOldWereYouPersonalityDisorder_FreeTextBox','HowOldWereYouPTSD_FreeTextBox','HowOldWereYouSchizophrenia_FreeTextBox','HowOldWereYouSocialPhobia_FreeTextBox','HowOldWereYouAcne_FreeTextBox','HowOldWereYouAllergies_FreeTextBox','HowOldWereYouEnlargedProstate_FreeTextBox','HowOldWereYouSkinCondition_FreeTextBox','HowOldWereYouObesity_FreeTextBox','HowOldWereYouVitaminBDeficiency_FreeTextBox','HowOldWereYouVitaminDDeficiency_FreeTextBox','CancerCondition_OtherCancer','GrandparentDiagnosisHistory_WhichConditions','MotherDiagnosisHistory_WhichConditions','FatherDiagnosisHistory_WhichConditions','SiblingDiagnosisHistory_WhichConditions','DaughterDiagnosisHistory_WhichConditions','SonDiagnosisHistory_WhichConditions','MotherCancerCondition_OtherCancer','OtherCancer_MotherFreeTextBox','FatherCancerCondition_OtherCancer','OtherCancer_FatherFreeTextBox','SiblingCancerCondition_OtherCancer','OtherCancer_SiblingFreeTextBox','DaughterCancerCondition_OtherCancer','OtherCancer_DaughterFreeTextBox','SonCancerCondition_OtherCancer','OtherCancer_SonFreeTextBox','GrandparentCancerCondition_OtherCancer','OtherCancer_GrandparentFreeTextBox','notes','WesternMichiganSitePairing_SpectrumHealth','WesternMichiganSitePairing_SpectrumHealthSitePairi','OutsideTravel6Month_OutsideTravel6MonthWhereTravel','OutsideTravel6Month_OutsideTravel6MonthWhere','Language_SpokenWrittenLanguage','ConsentPII_HelpWithConsentSignature','OtherCondition_FatherFreeTextBox','OtherCondition_MotherFreeTextBox','OtherCondition_DaughterFreeTextBox','OtherHealthPlan_FreeText','OtherCondition_SiblingFreeTextBox','OtherDelayedMedicalCare_FreeText','OtherCondition_SonFreeTextBox','OtherCondition_GrandparentFreeTextBox','OtherThyroid_FreeTextBox','OtherInfectiousDisease_FreeTextBox','ConsentPII_VerifiedPrimaryPhoneNumber','OtherDiabetes_FreeTextBox','OtherCancer_FreeTextBox','OtherHearingEye_FreeTextBox','OtherBrainNervousSystem_FreeTextBox','OtherDiagnosis_FreeTextBox','OtherHeartorBloodCondition_FreeTextBox','OtherDigestiveCondition_FreeTextBox','OtherArthritis_FreeTextBox','OtherHormoneEndocrine_FreeTextBox','OtherRespiratory_FreeTextBox','OtherKidneyCondition_FreeTextBox','OtherMentalHealthSubstanceUse_FreeTextBox','OtherBoneJointMuscle_FreeTextBox','OtherInsuranceType_FreeText'))"
    }
    ],
    "shift":[
        {"rules":"@shift.date",
         "fields":["observation_date"]},
        {"rules":"@shift.datetime",
         "fields":["observation_datetime"]}
    ]
}
